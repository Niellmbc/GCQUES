<!DOCTYPE html>
<html lang="en">

<head>
	<title>Admin Account</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<link href="assets/css/bootstrap.min.css" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Prompt" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
	<link href="assets/css/mdb.min.css" rel="stylesheet">
	<link href="assets/css/font-awesome.css" rel="stylesheet">
	<link href="assets/css/stepper.css" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="assets/css/style.css">
	<link rel="stylesheet" type="text/css" href="assets/css/animate.css">
	<link rel="stylesheet" type="text/css" href="assets/css/sweetalert-master/dist/sweetalert.css">
	<!-- <link rel="stylesheet" type="text/css" href="assets/css/sweetalert-master/dist/sweetalert.min.css"> -->
</head>

<body class="fixed-sn">

	<!--Main Navigation-->
	<header>

		<!-- Sidebar navigation -->
		<div id="slide-out" class="side-nav fixed sidenavb">
			<ul class="custom-scrollbar">
				<li class="logo-sn d-block waves-effect">
					<div class="text-center">
						<a class="pl-0 text-white" href="#">Super Admin Account</a>
					</div>
				</li>	
				<!-- Card -->

				<div class="card card-image" style="background-image: url(assets/img/gcueslogo.png);">

					<!-- Content -->
					<div class="text-white flex-center d-flex align-items-center rgba-black-strong py-5 px-4">
						<div>
							<div class="col-xl-5 col-md-4 mb-3 text-center float-left">

								<img src="" id="profPic" class="img-fluid z-depth-1 rounded-circle"
								alt="Responsive image">

							</div>
							<div class="float-right">
								<p id="pName" style="font-size: 14px;"></p>
								<p id="pEmail" style="font-size: 14px;"></p>
							</div>
						</div>
					</div>
					<!-- Content -->
				</div>
				<!-- Card -->
				<!-- Side navigation links -->
				<li>
					<ul class="collapsible collapsible-accordion">
						<li><a class="collapsible-header waves-effect arrow-r active" href="admin.html"><i class="fa fa-tachometer"></i> Dashboards</a>
						</li>
						<li>
							<a class="collapsible-header waves-effect arrow-r" href="AddUser.html"><i class="fa fa-user"></i>Users</a>
						</li>
						<li>
							<a class="collapsible-header waves-effect arrow-r" href="adminTransactions.html"><i class="fa fa-folder"></i>Transactions</a>
						</li>
						<li>
							<a class="collapsible-header waves-effect arrow-r" href="adminAccount.html"><i class="fa fa-cog"></i>Account Settings</a>
						</li>
						<li>
							<a class="collapsible-header waves-effect arrow-r" href="allLogs.html"><i class="fa fa-book"></i>Activity Logs</a>
						</li>

					</ul>
				</li>
				<!--/. Side navigation links -->
			</ul>
			<div class="sidenav-bg mask-strong"></div>
		</div>
		<!--/. Sidebar navigation -->

		<!-- Navbar -->
		<nav class="navbar fixed-top navbar-expand-lg scrolling-navbar double-nav navb">
			<!-- SideNav slide-out button -->
			<div class="float-left">
				<a href="#" data-activates="slide-out" class="button-collapse black-text"><i class="fa fa-bars text-white"></i></a>
			</div>
			<!-- Breadcrumb-->
			<div class="breadcrumb-dn">
				<p>Gordon College Cashier Queueing</p>
			</div>

			<!--Navbar links-->
			<ul class="nav navbar-nav nav-flex-icons ml-auto">

				<li class="nav-item dropdown">
					<a class="nav-link dropdown-toggle waves-effect" href="#" id="userDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
						<i class="fa fa-user "></i> <span class="clearfix d-none d-sm-inline-block ">Profile</span></a>
					</a>
					<div class="dropdown-menu dropdown-menu-right dropdown-default" aria-labelledby="userDropdown">
						<a class="dropdown-item" onclick="logOutAdmin()">Log Out</a>
						<a class="dropdown-item" href="adminAccount.html">My account</a>
					</div>
				</li>

			</ul>
			<!--/Navbar links-->
		</nav>
		<!-- /.Navbar -->

	</header>
	<!--Main Navigation-->

	<!--Main layout-->
	<main>
		
		<div class="container-fluid">
			<div class="row" style="margin-right: -100px;">
				<div class="col-md-4 offset-md-8">
					<div class="row">
						<div class="col-md-5">
							<div class="md-form">
								<input placeholder="Selected time" type="text" id="closingtime" class="form-control timepicker" >
								<label for="closingtime">Set Closing Time</label>
							</div>
						</div>
						<div class="col-md-4"><button class="btn btn-rounded btn-outline-primary btn-md" onclick="setClosingTime()">Set</button>
						</div>
					</div>
				</div>
			</div>
			<!-- Admin Cards -->
			<section class="section">

				<!--Grid row-->
				<div class="row">

					<!--Grid column-->
					<div class="col-xl-4 col-md-6 mb-4">

						<!--Card-->
						<div class="card card-cascade cascading-admin-card">

							<!--Card Data-->
							<div class="admin-up">
								<i class="fa fa-graduation-cap primary-color"></i>
								<div class="data">
									<p>Enrolment</p>
									<h4 id="cEnrollment"></h4>
								</div>
							</div>
							<!--/.Card Data-->

							<!--Card content-->
						<!-- <div class="card-body">
							<div class="progress">
								<div class="progress-bar primary-color" role="progressbar" style="width: 25%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
							</div> -->
							<!--Text-->
						<!-- 	<p class="card-text">Better than last week (25%)</p>
						</div> -->
						<!--/.Card content-->

					</div>
					<!--/.Card-->

				</div>
				<!--Grid column-->

				<!--Grid column-->
				<div class="col-xl-4 col-md-6 mb-4">

					<!--Card-->
					<div class="card card-cascade cascading-admin-card">

						<!--Card Data-->
						<div class="admin-up">
							<i class="fa fa-line-chart warning-color"></i>
							<div class="data">
								<p>Other Transac</p>
								<h4 id="cOther"></h4>
							</div>
						</div>
						<!--/.Card Data-->

						

					</div>
					<!--/.Card-->

				</div>
				<!--Grid column-->

				<!--Grid column-->
				<div class="col-xl-4 col-md-6 mb-4">

					<!--Card-->
					<div class="card card-cascade cascading-admin-card">

						<!--Card Data-->
						<div class="admin-up">
							<i class="fa fa-money light-blue lighten-1"></i>
							<div class="data">
								<p>Bank Accounts</p>
								<h4 id="cBank"></h4>
							</div>
						</div>
						<!--/.Card Data-->

						
					</div>
					<!--/.Card-->

				</div>
				<!--Grid column-->

				<!--Grid column-->
				<div class="col-xl-6 col-md-6 mb-4">

					<!--Card-->
					<div class="card card-cascade cascading-admin-card">

						<!--Card Data-->
						<div class="admin-up">
							<i class="fa fa-file red accent-2"></i>
							<div class="data">
								<p>Doc. Request</p>
								<h4 id="cDreq"></h4>
							</div>
						</div>
						<!--/.Card Data-->

						

					</div>
					<!--/.Card-->

				</div>
				<!--Grid column-->
				<!--Grid column-->
				<div class="col-xl-6 col-md-6 mb-4">

					<!--Card-->
					<div class="card card-cascade cascading-admin-card">

						<!--Card Data-->
						<div class="admin-up">
							<i class="fa fa-folder-open red accent-2"></i>
							<div class="data">
								<p>Doc. Releasing</p>
								<h4 id="cDrel"></h4>
							</div>
						</div>
						<!--/.Card Data-->

						
					</div>
					<!--/.Card-->

				</div>
				<!--Grid column-->
				

			</div>
			<!--Grid row-->
		</section>
		<hr>
		<!-- /Admin Cards -->

		<!--Section: Chart types-->
		<section>

			<!--Grid row-->
			<div class="row">

				<!--Grid column-->
				<div class="col-lg-4 mb-4">

					<!--Card-->
					<div class="card card-cascade narrower">

						<!--Card image-->
						<div class="view view-cascade gradient-card-header blue">
							<h5 class="mb-0">Monthly</h5>
						</div>
						<!--/Card image-->

						<!--Card content-->
						<div class="card-body card-body-cascade text-center">

							<canvas id="monthly" height="200px"></canvas>

						</div>
						<!--/.Card content-->

					</div>
					<!--/.Card-->

				</div>
				<!--Grid column-->
				<!--Grid column-->
				<div class="col-lg-4 mb-4">

					<!--Card-->
					<div class="card card-cascade narrower">

						<!--Card image-->
						<div class="view view-cascade gradient-card-header blue">
							<h5 class="mb-0">Weekly</h5>
						</div>
						<!--/Card image-->

						<!--Card content-->
						<div class="card-body card-body-cascade text-center">

							<canvas id="weekly" height="200px"></canvas>

						</div>
						<!--/.Card content-->

					</div>
					<!--/.Card-->

				</div>
				<!--Grid column-->
				<!--Grid column-->
				<div class="col-lg-4 mb-4">

					<!--Card-->
					<div class="card card-cascade narrower">

						<!--Card image-->
						<div class="view view-cascade gradient-card-header blue">
							<h5 class="mb-0">Daily</h5>
						</div>
						<!--/Card image-->

						<!--Card content-->
						<div class="card-body card-body-cascade text-center">
							
							<canvas id="daily" height="200px"></canvas>

						</div>
						<!--/.Card content-->

					</div>
					<!--/.Card-->

				</div>
				<!--Grid column-->


			</div>
			<!--Grid row-->
			<!--Grid row-->
			<div class="row mb-4">

				
				
			</div>
			<!--Grid row-->
			<div class="float-right">	
				<button class="btn btn-outline-primary "><a href="printgraph.html"><i class="fa fa-print"></i> Print Report</button>	
				</div>
			</section>



		</div>
	</main>
	<!-- /Main Layout -->

</body>

<script type="text/javascript" src="js/jquery-3.3.1.min.js"></script>
<script src="https://js.pusher.com/4.3/pusher.min.js"></script>
<script type="text/javascript" src="js/popper.min.js"></script>
<script type="text/javascript" src="js/bootstrap.min.js"></script>
<script type="text/javascript" src="js/mdb.min.js"></script>
<script type="text/javascript" src="js/Chart.min.js"></script>
<script type="text/javascript" src="js/Chart.bundle.min.js"></script>
<script type="text/javascript" src="js/cashier.js"></script>
<script type="text/javascript" src="js/graphs.js"></script>
<!-- <script src="js/receiver.js"></script> -->
<script type="text/javascript" src="js/wow.min.js"></script>
<script type="text/javascript" src="js/sweetalert-master/dist/sweetalert.min.js"></script>
<!-- <script type="text/javascript" src="js/voicemo.js"></script> -->


<script>
        // SideNav Initialization
        $(".button-collapse").sideNav();
        var container = document.querySelector('.custom-scrollbar');
        $('#closingtime').pickatime({
    // 12 or 24 hour
    twelvehour: true,
});
        Ps.initialize(container, {
        	wheelSpeed: 2,
        	wheelPropagation: true,
        	minScrollbarLength: 20
        });
    </script>
    <script>
    	let dreqInTrans=0;
    	let dreqInReg=0;
    	let otherInTrans=0;
    	let otherInReg=0;
    	let enrolInTrans=0;
    	let enrolInReg=0;
    
    	let countEnrollment=()=>{
    		fetch(url+'/count/tbl_transaction/fldTransType/Enrolment').then(res=>res.json()).then(function(res){
    			enrolInTrans=res[0].totalcount;
    		});
    		fetch(url+'/count/tbl_registrar/fldType/Enrolment').then(res=>res.json()).then(function(res){
    			enrolInReg=res[0].totalcount;
    		});
    		document.getElementById('cEnrollment').innerHTML= parseInt(enrolInTrans) + parseInt(enrolInReg);
    	}
    	countEnrollment();
    	let countBankAccount=()=>{
    		fetch(url+'/count/tbl_transaction/fldTransType/Bank Account').then(res=>res.json()).then(function(res){
    			document.getElementById('cBank').innerHTML = res[0].totalcount;
    		});
    	}
    	countBankAccount();
    	let countDreq=()=>{    		
    		fetch(url+'/count/tbl_transaction/fldTransType/Document Request').then(res=>res.json()).then(function(res){
    			dreqInTrans = res[0].totalcount;
    		});
    		fetch(url+'/count/tbl_registrar/fldType/Document Request').then(res=>res.json()).then(function(res){
    			dreqInReg = res[0].totalcount;
    		});
    		document.getElementById('cDreq').innerHTML = parseInt(dreqInReg) + parseInt(dreqInTrans);

    	}
    	countDreq();
    	let countOther=()=>{
    		
    		fetch(url+'/count/tbl_transaction/fldTransType/Other Transaction').then(res=>res.json()).then(function(res){
    			otherInTrans = res[0].totalcount;

    		});
    		fetch(url+'/count/tbl_registrar/fldType/Other Transaction').then(res=>res.json()).then(function(res){
    			otherInReg = res[0].totalcount;
    		});
    		document.getElementById('cOther').innerHTML = parseInt(otherInReg) + parseInt(otherInTrans);
    	}
    	countOther();
    	// let countEncoding=()=>{
    	// 	fetch(url+'/count/tbl_registrar/fldType/Encoding').then(res=>res.json()).then(function(res){
    	// 		document.getElementById('cEncode').innerHTML = res[0].totalcount;
    	// 	});
    	// }
    	// countEncoding();
    	let countDrel=()=>{
    		fetch(url+'/count/tbl_registrar/fldType/Document Releasing').then(res=>res.json()).then(function(res){
    			document.getElementById('cDrel').innerHTML = res[0].totalcount;
    		});
    	}
    	countDrel();
    	c.sender();
    	Pusher.logToConsole = true;

    	var pusher = new Pusher('5fb69c9d534cd55d78e7', {
    		cluster: 'ap1',
    		forceTLS: true
    	});

    	var channel = pusher.subscribe('my-channel');
    	channel.bind('my-event', function(data) {
    		countEnrollment();
    		countBankAccount();
    		countDreq();
    		countOther();
    		countDrel();
    		myChart.update();
    		myChart1.update();
    		myChart2.update();
    		tableTrans();
    		tableReg();
    	});
    </script>
    <script>
    	let id= localStorage.adminID;
    	fetch(url+'/tbl_user/fldUserID/'+id).then(res=>res.json()).then(function(res){
    		document.getElementById('pName').innerHTML=res[0].fldFname+' '+res[0].fldMname+' '+res[0].fldLname;
    		document.getElementById('pEmail').innerHTML=res[0].fldEmail;
    		document.getElementById('profPic').src=res[0].fldImg;
    	});

    	document.getElementById('closingtime').value= localStorage.closing;
    </script>

    </html>
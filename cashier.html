<!DOCTYPE html>
<html lang="en">

<head>
	<title>Cashier Dashboard</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<link href="assets/css/bootstrap.min.css" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Prompt" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
	<link href="assets/css/mdb.min.css" rel="stylesheet">
	<link href="assets/css/font-awesome.css" rel="stylesheet">
	<link href="assets/css/stepper.css" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="assets/css/style.css">
	<link rel="stylesheet" type="text/css" href="assets/css/animate.css">
	<link rel="stylesheet" type="text/css" href="assets/css/sweetalert-master/dist/sweetalert.css">
	<!-- <link rel="stylesheet" type="text/css" href="assets/css/sweetalert-master/dist/sweetalert.min.css"> -->
</head>

<body class="fixed-sn">

	<!--Main Navigation-->
	<header>

		<!-- Sidebar navigation -->
		<div id="slide-out" class="side-nav fixed sidenavb">
			<ul class="custom-scrollbar">
				<li class="logo-sn d-block waves-effect">
					<div class="text-center">
						<a class="pl-0 text-white" id="pcids"></a>
					</div>
				</li>	
				<!-- Card -->
				<div class="card card-image" style="background-image: url(assets/img/gcueslogo.png);">

					<!-- Content -->
					<div class="text-white flex-center d-flex align-items-center rgba-black-strong py-5 px-4">
						<div>
							<div class="col-xl-5 col-md-4 mb-3 text-center float-left">

								<img src="" id="profPic" class="img-fluid z-depth-1 rounded-circle"
								alt="Responsive image">

							</div>
							<div class="float-right">
								<p id="pName" style="font-size: 14px;"></p>
								<p id="pEmail" style="font-size: 14px;"></p>
							</div>
						</div>
					</div>
					<!-- Content -->
				</div>
				<!-- Card -->
				<!-- Side navigation links -->
				<li>
					<ul class="collapsible collapsible-accordion">
						<li><a class="collapsible-header waves-effect arrow-r active" href="cashier.html"><i class="fa fa-home"></i> Home</i></a>
						</li>
						<li><a class="waves-effect arrow-r" href="cashierAccount.html"><i class="fa fa-cog"></i> Account Settings</a>
						</li>
						<li><a class="waves-effect arrow-r" href="cashierLog.html"><i class="fa fa-book"></i> Activity Log</a>
						</li>
					</ul>
				</li>
				<!--/. Side navigation links -->
			</ul>
			<div class="sidenav-bg mask-strong"></div>
		</div>
		<!--/. Sidebar navigation -->

		<!-- Navbar -->
		<nav class="navbar fixed-top navbar-expand-lg scrolling-navbar double-nav navb">
			<!-- SideNav slide-out button -->
			<div class="float-left">
				<a href="#" data-activates="slide-out" class="button-collapse black-text"><i class="fa fa-bars text-white"></i></a>
			</div>
			<!-- Breadcrumb-->
			<div class="breadcrumb-dn mr-auto">
				<p>Gordon College Cashier Queueing</p>
			</div>

			<!--Navbar links-->
			<ul class="nav navbar-nav nav-flex-icons ml-auto">

				

				<li class="nav-item dropdown">
					<a class="nav-link dropdown-toggle waves-effect" href="#" id="userDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
						<i class="fa fa-user "></i> <span class="clearfix d-none d-sm-inline-block ">Profile</span></a>
					</a>
					<div class="dropdown-menu dropdown-menu-right dropdown-default" aria-labelledby="userDropdown">
						<a class="dropdown-item" onclick="logOutAccount()">Log Out</a>
						<a class="dropdown-item" href="#">My account</a>
					</div>
				</li>

			</ul>
			<!--/Navbar links-->
		</nav>
		<!-- /.Navbar -->

	</header>
	<!--Main Navigation-->

	<!--Main layout-->
	<main>

		<div class="container-fluid">

			<!-- Sample Queue List -->
			<!--Section: Overlay cards-->
			<section class="mb-5">
				<div class="row">
					<div class="col-md-11">
						<h3 id="" class="font-weight-bold dark-grey-text mb-4"><i class="fa fa-list"></i> <strong>Queue Numbers In line</strong> <span class="badge badge-pill green float-right">Online</span></h3>
					</div>
						<!-- <div class="col-md-1">
							<label class="bs-switch">
								<input type="checkbox" id="status">
								<span class="slider round"></span>
							</label>
						</div> -->
					</div>
					<hr>	


					<div class="row" id="queuelist">
					</div>

				</section>
				<!--Section: Overlay cards-->
				<!-- /Sample Queue List -->
			</div>
		</main>
		<!-- /Main Layout -->

		<!-- Sample Modal Done -->
		<!-- Button trigger modal-->


		<!--Modal: modalConfirmDelete-->
		<div class="modal fade" id="modalID" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
		aria-hidden="true">
		<div class="modal-dialog modal-md modal-notify modal-success" role="document">
			<!--Content-->
			<div class="modal-content text-center">
				<!--Header-->
				<div class="modal-header d-flex justify-content-center">
					<p class="heading">Transaction Details</p>
				</div>

				<!--Body-->
				<div class="modal-body">

					<i class="fa fa-check fa-4x animated rotateIn"></i>
					<hr>
					<div class="table-responsive">
						<table class="table">
							<!--Table head-->
							<thead >
								<tr>
									<th>Student No</th>
									<th>Queue No</th>
									<th>Office</th>
									<th>Transaction Type</th>
									<th>Date</th>

								</tr>
							</thead>
							<!--Table head-->

							<!--Table body-->
							<tbody id="transDet">
							</tbody>
							<!--Table body-->

						</table>
					</div>


				</div>

				<!--Footer-->
				<div class="modal-footer flex-center">
					<button class="btn btn-outline-success  waves-effect" data-dismiss="modal"  onclick="doneTrans()">Done</button>
					<button type="button" class="btn  btn-danger waves-effect" data-dismiss="modal" onclick="noShowTrans()">No Show</a>
				</div>
			</div>
			<!--/.Content-->
		</div>
	</div>
	<!--Modal: modalConfirmDelete-->
	<!-- /Sample Modal Done -->
</body>

<script type="text/javascript" src="js/jquery-3.3.1.min.js"></script>
<script src="https://js.pusher.com/4.3/pusher.min.js"></script>
<script type="text/javascript" src="js/popper.min.js"></script>
<script type="text/javascript" src="js/bootstrap.min.js"></script>
<script type="text/javascript" src="js/mdb.min.js"></script>
<script type="text/javascript" src="js/wow.min.js"></script>
<script type="text/javascript" src="js/sweetalert-master/dist/sweetalert.min.js"></script>
<script type="text/javascript" src="js/queuelist.js"></script>
<!-- <script type="text/javascript" src="js/receiver.js"></script> -->



<script>
        // SideNav Initialization
        $(".button-collapse").sideNav();

        var container = document.querySelector('.custom-scrollbar');
        Ps.initialize(container, {
        	wheelSpeed: 2,
        	wheelPropagation: true,
        	minScrollbarLength: 20
        });
    </script>
    <script>
    	let cashierid = localStorage.cID;
    	fetch(url+'/tbl_cashier/fldCashierID/'+cashierid).then(res=>res.json()).then(function(res){
    		document.getElementById('pName').innerHTML=res[0].fldFname+' '+res[0].fldMname+' '+res[0].fldLname;
    		document.getElementById('profPic').src=res[0].fldImg;
    		document.getElementById('pcids').innerHTML='Cashier #'+res[0].fldCashierID+' Account';
    	});

    	Pusher.logToConsole = true;

    	var pusher = new Pusher('5fb69c9d534cd55d78e7', {
    		cluster: 'ap1',
    		forceTLS: true
    	});

    	var channel = pusher.subscribe('my-channel');
    	channel.bind('my-event', function(data) {
    		getOnlineCashiers();
    		getlastcashierSaTrans();
    		getLastqueue();
    		getLastqueueInReg();
    		getLastCashier();
    		countCashiers();
    		lastcashierinput();
    		numberOfTransOfCashier();
    		totalTrans();
    		QueueList();
    		showLog();
    		showLogReg();
    	});
    </script>
    </html>
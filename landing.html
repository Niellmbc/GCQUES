<!DOCTYPE html>
<html lang="en">

<head>
	<title>Welcome Page</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<link href="assets/css/bootstrap.min.css" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Prompt" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
	<link href="assets/css/mdb.min.css" rel="stylesheet">
	<link href="assets/css/font-awesome.css" rel="stylesheet">
	<link href="assets/css/style.min.css" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="assets/css/style.css">
</head>

<body class="">
	
	

	<!--/.Navbar-->
	<main class="mt-0">

		<div class="container-fluid">
			<section class="section mb-1">
				
			</section>
			<div class="row">
				<div class="col-md-8">
					<h1>Finance Department</h1>
				</div>
				<div class="col-md-4" style="margin-left:-32px;">	
					<nav class="breadcrumb btn-outline-teal flex-center">
						<h4 class="breadcrumb-item flex-center-center" id="time" style="font-size: 35px;padding:-10px -10px -10px -10px"></h4>
					</nav>

				</div>
			</div>
			

			<div class="row mt-0" >
				<div class="col-md-8">
					<div class="col-md-12">	
						<marquee><h1 class="red-text flex-center">Now Serving!!!</h1></marquee>
						<div class="row"  id="queueServing">
						</div>
					</div>	
				</div>
				<div class="col-md-4" style="margin-left:-35px">
					<h1 class="teal-text text-center">Waiting List</h1>
					<div class="card">
						<ul class="list-group z-depth-1" id="queueServingTrans">
							
						</ul>
					</div>
				</div>
			</div>	
		</div>
	</div>

</main>
<!--Modal: Login Form-->
<div class="modal fade " id="modalConfirmDelete" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
aria-hidden="true">
<div class="modal-dialog cascading-modal " role="document">
	<!--Content-->
	<div class="modal-content">

		<!--Modal cascading tabs-->
		<div class="modal-c-tabs">

			<!-- Nav tabs -->
			<ul class="nav md-tabs tabs-2 secondary-color" role="tablist">
				<li class="nav-item">
					<a class="nav-link active" data-toggle="tab" href="#panel1" role="tab"><i class="fa fa-user mr-1"></i> Login</a>
				</li>

			</ul>

			<!-- Tab panels -->
			<div class="tab-content">
				<!--Panel 1-->
				<div class="tab-pane fade in show active" id="panel1" role="tabpanel">

					<!--Body-->
					<div class="modal-body mb-1">
						<div class="md-form form-sm">
							<i class="fa fa-envelope prefix"></i>
							<input type="text" id="uname" class="form-control form-control">
							<label for="form11">Username</label>
						</div>

						<div class="md-form form-sm">
							<i class="fa fa-lock prefix"></i>
							<input type="password" id="pass" class="form-control form-control">
							<label for="form12">Your password</label>
						</div>
						<div class="text-center mt-2">
							<button class="btn btn-info" onclick="loginAccount()">Log in <i class="fa fa-sign-in ml-1"></i></button>
						</div>
					</div>
					<!--Footer-->
					<div class="modal-footer display-footer">
						<!-- <div class="options text-center text-md-right mt-1">
							<p>Not a member? <a href="#" class="blue-text">Sign Up</a></p>
							<p>Forgot <a href="#" class="blue-text">Password?</a></p>
						</div> -->
						<button type="button" class="btn btn-outline-info waves-effects ml-auto" data-dismiss="modal">Close</button>
					</div>

				</div>
				<!--/.Panel 1-->

				
			</div>

		</div>
	</div>
	<!--/.Content-->
</div>
</div>
<!--Modal: login form-->

</body>
<script type="text/javascript" src="js/jquery-3.3.1.min.js"></script>
<script type="text/javascript" src="js/popper.min.js"></script>
<script type="text/javascript" src="js/bootstrap.min.js"></script>
<script type="text/javascript" src="js/mdb.min.js"></script>
<script src="js/cashier.js"></script>

<script>
        // SideNav Initialization
        $(".button-collapse").sideNav();

        var container = document.querySelector('.custom-scrollbar');
        Ps.initialize(container, {
        	wheelSpeed: 2,
        	wheelPropagation: true,
        	minScrollbarLength: 20
        });
    </script>
    <script>
    	function checkTime(i) {
    if (i < 10) {i = "0" + i};  // add zero in front of numbers < 10
    return i;
}
function Starttime(){

	var today = new Date();
	var dd = today.getDate();
	var mm = today.getMonth()+1; //January is 0!
	var yyyy = today.getFullYear();
	var today = new Date();
	var h = today.getHours();
	var m = today.getMinutes();
	var s = today.getSeconds();
	var aorp = "";
	m = checkTime(m);
	s = checkTime(s);
	if (h > 12) {
		h = h-12;
		if(h == 0){
			h = 1;
		}
		aorp = "PM"; 
	} else { 
		aorp = "AM"; 
	}
	var time = h + ":" + m + ":" + s + " " + aorp;
    // var t = setTimeout(startTime, 500);

    if(dd<10) {
    	dd = '0'+dd
    } 
    if(mm<10) {
    	mm = '0'+mm
    } 
    today = mm + '/' + dd + '/' + yyyy;
    document.getElementById('time').innerHTML=today+' '+time;
    

}
window.setInterval(Starttime,500)

let queueServing=()=>{
	fetch(url+'/queueServing').then(res=>res.json()).then(function(res){
		let ls="";
		let a= res.length;
		let s = 0;
		if(a<=1){
			s=12;
		}else if(a==2){
			s=6;
		}else{
			s = a /12;
		}
		for(let i=0;i<res.length;i++){
			ls+='<div class="col-md-'+s+' col-md-4 mt-1" style="margin-right:-25px;">';
			ls+='<div class="card card-image" style="background-image: url(assets/img/gcueslogo.png);">';
			ls+='<div class="text-white flex-center d-flex align-items-center rgba-black-strong py-5 px-4">';
			ls+='<div>';
			ls+='<h6 class="orange-text text-center"><i class="fa fa-id-badge"></i><strong  style="font-size:25px;"> CASHIER #'+res[i].fldCashierNo+'</strong></h6>';
			ls+='<h1 class="card-title pt-4 pb-3 font-weight-bold text-center qnum"><strong>'+res[i].fldQueueNo+'</strong></h1>';
			ls+='</div>';
			ls+='</div>';

			ls+='</div>';
			ls+='</div>';
		}
		$('#queueServing').html(ls);
	});
}
let queueServingTrans=()=>{
	fetch(url+'/tbl_transaction').then(res=>res.json()).then(function(res){
		let ls="";
		
		for(let i=0;i<res.length;i++){
			if(res[i].fldRemarks=='In Line'){

				ls+='<li class="list-group-item d-flex justify-content-between align-items-center">';
				ls+='<a class="dark-grey-text font-small" style="font-size: 30px;"><i class="fa fa-id-badge dark-grey-text mr-2" aria-hidden="true"></i> Q #: '+res[i].fldQueueNo+' - Cashier:'+res[i].fldCashierNo+'</a>';
				ls+='<span class="badge badge-default">Waiting</span>';
				ls+='</li>';
			}
		}
		$('#queueServingTrans').html(ls);
	});
}

window.setInterval(queueServingTrans,1000);
window.setInterval(queueServing,1000);

</script>
</html>